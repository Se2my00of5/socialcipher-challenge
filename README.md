# CTF Challenge: SocialCipher

## Общее описание и цель:

Добро пожаловать в SocialCipher — нашу новую, экспериментальную платформу для безопасного общения и обмена мыслями! Мы строим ее на передовых микросервисах, чтобы обеспечить максимальную производительность и надежность. Наша команда активно работает над новыми функциями и обещает беспрецедентный уровень приватности... или нет?

Вы только что зарегистрировались в SocialCipher и начинаете осваиваться. Ваша главная цель — собрать как можно больше секретной информации о главном администраторе системы (ALLHitAdmin), получив доступ к его тайным записям.

---

## Задача 1: Gateway Glimpse

*   **Название:** Gateway Glimpse
*   **Теги:** `Web`, `Misc`
*   **Сложность:** `Easy`
*   **Легенда для участников:** "АрхитеКтура SocialCipher основана на РазделенИи сервисов, Но, похоЖе, где-то произошла непредвиденная 'утечКа'. Изучите, кАкие 'следы' оставляет внутренняя работа системы, и найдите уникальный Признак, который поможЕт вам приблизиться к вашей Цели."

### Подсказки:

*   "Обратите внимание на различия в ответах сервера при просмотре разных типов страниц."
*   "Посмотрите на полные HTTP-ответы в инструментах разработчика (Developer Tools) вашего браузера, уделив внимание заголовкам"

### Инструкция по прорешиванию и получению флага
1.  **Доступ к сервису:** Откройте веб-приложение в браузере по адресу `http://localhost:5000`.
2.  **Регистрация/Вход:** Зарегистрируйте нового пользователя.
3.  **Исследование профилей:** Перейдите на страницу "Browse Users" (`/users`). Вы увидите список пользователей.
4.  **Поиск утечки:**
    *   Попробуйте перейти в профиль любого пользователя. (`user/{id}`)
    *   **Ключевой момент:** Внимательно изучите полный HTTP-ответ, который возвращает сервер. Посмотрите вкладку "Headers" (Заголовки), а именно "Response" (Ответ).
    *   Вы заметите, заголовок `Request-Url` - это url ответа другого сервиса. Он будет необходим для следующей задачи
    *   Тоже самое вы найдёте и в постах любого пользователя(`user/{id}/posts`), но дополнительно в постах ещё будет заголовок с флагом `X-Flag-One`
5.  Логично было бы засунуть флаг и в профили пользователей, но задача и так лёгкая получилась

---

## Задача 2: Admin's Encoded Scrolls

*   **Название:** Admin's Encoded Scrolls
*   **Теги:** `Crypto`, `Web`
*   **Сложность:** `Hard`
*   **Легенда для участников:** "Вы нашли утечку и теперь можете получить к другому сервису через сваггер (`/swagger-ui.index.html`). Это наверняка поможет получить секретные записи ALLHitAdmin, но что-то вам подсказывает, что записи зашифрованы..."


### Подсказки:

*   "Гайды от Юлии. Жребий брошен."
*   "Записи зашифрованы двумя шифрами"
*   "Загляните в профиль `CryptoStrategy`. Возможно найдётся подсказка, как расшифровать посты."
*   "Вы можете создать свои посты"

### Инструкция по прорешиванию и получению флага
1.  **Доступ к админ-сервису:** Используя полученный на предыдущем шаге URL, подключаетесь к сваггеру(`http://localhost:5001/swagger-ui.index.html`) 
2.  **Получение постов:**
    *   Для получения постов нужен токен, для токена нужен профиль пользователя
    *   Получаете профиль ALLHitAdmin (`api/v1/profile/6`) и копируете его 
    *   Вставляете профиль в тело эндпоинта `api/v1/token`, получаете токен и копируете его
    *   Можно попытаться получить посты через эндпоинт `api/v1/posts/6`, но токен почему-то не вставляется. Так что надо самому сделать запрос и вставить в заголовки токен. Не баг, а фича.
    *   Через Postman делаете GET запрос по адресу `http://localhost:5001/api/v1/posts/6`, добавив через вкладку Authorization - Bearer Token (Можно просто попытаться добавить заголовок `Authorization`). Посты получены, но зашифрованы
3.  **Расшифровка постов**
    *   Данные зашифрованы двумя шифрами, `солёный язык` и `шифр цезаря`. Именно в этом порядке, следовательно расшифровываем в обратном. 
    *   Сначала `шифр цезаря`, можно найти сайт, который это может сделать [https://poformule.ru/text/shifr-cezarya](https://poformule.ru/text/shifr-cezarya). Сдвиг=5. 
    *   `солёный язык` - это шифр, в котором после каждой гласной добавляется буква с(или латинская c, в зависимости от языка гласной) и дублируется эта гласная. Привет = Присивесет. Онлайн дешифратора для него я не нашёл, но есть ии, которые могут помочь, либо ручками. 
5.  **Получение флага:**
    *   Нужный пост имеет `title` = `"Patch Notes: My secret"`
    *   Изначальный - "Rdhd xjhjhwjhjy nhnx MNHNYX{HNHNUMJHJW_RFHFXYJHJW_ZHZSQTHTHPJHJI_YMJHJ_XJHJHWJHJY_8gH9iJHJ}"
    *   После цезаря - "Mycy sececrecet icis HICITS{CICIPHECER_MACASTECER_UCUNLOCOCKECED_THECE_SECECRECET_8bC9dECE}"
    *   Дешифрованный - "My secret is HITS{CIPHER_MASTER_UNLOCKED_THE_SECRET_8bC9dE}"
6.  Соляной язык не стабильный, то есть не всегда зашифровав и расшифровав мы получим изначальный текст. Например, асасин = асин. Но это не должно помешать 

---

## Подкладывание флагов
Флаги для обеих задач хранятся в одном файле `flags.txt`. Достаточно отредактировать их в файле.

## Лицензия и права на публикацию
Данная задача предоставляется под лицензией MIT License. Полный текст лицензии доступен по ссылке: [LICENSE](LICENSE) 

## Подсказки
Подсказки отсортированы по подсказочности, поэтому давать в том порядке в котором написаны

## Инструкцию по развертыванию
запускаем docker-compose в директории проекта. 
`docker-compose up --build -d`